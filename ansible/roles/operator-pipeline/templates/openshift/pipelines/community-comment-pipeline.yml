---
apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: community-comment-pipeline
spec:
  params:
    - name: git_comment_body
    - name: git_pr_url
    - name: env
    - name: pipeline_image
      default: "quay.io/redhat-isv/operator-pipelines-images:released"
    - name: image_namespace
    - name: metrics_endpoint
  tasks:
    - name: parse-github-pr-comment
      taskRef:
        name: github-test-comment
      params:
        - name: git_pr_url
          value: "$(params.git_pr_url)"
        - name: git_comment_body
          value: "$(params.git_comment_body)"
        - name: pipeline_image
          value: "$(params.pipeline_image)"
        - name: env
          value: "$(params.env)"
        - name: image_namespace
          value: "$(params.image_namespace)"
        - name: metrics_endpoint
          value: "$(params.metrics_endpoint)"
      workspaces:
        - name: output
          emptyDir: {}
