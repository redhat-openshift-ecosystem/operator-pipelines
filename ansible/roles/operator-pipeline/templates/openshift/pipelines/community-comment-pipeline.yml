---
apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: community-comment-pipeline
spec:
  params:
    - name: git_comment_body
    - name: git_pr_url
    - name: env

    - name: pipeline_image
      default: "quay.io/redhat-isv/operator-pipelines-images:released"
  workspaces:
    - name: results
  tasks:
    - name: parse-github-pr-comment
      taskRef:
        name: github-test-comment
      params:
        - name: pipeline_image
          value: "$(params.pipeline_image)"
        - name: request_url
          value: "$(params.git_pr_url)"
        - name: comment_body
          value: "$(params.git_comment_body)"
